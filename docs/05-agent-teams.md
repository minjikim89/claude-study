# Agent Teams — 팀원끼리 직접 소통하는 프로젝트 팀

## Agent Teams란?

Subagent가 **"부하 직원이 메인에게만 보고하는 구조"**라면, Agent Teams는 **"팀원들이 서로 직접 소통하며 협업하는 구조"**다.

여러 Claude 인스턴스가 각각 독립된 세션에서 동시에 작업하면서, 공유 태스크 리스트를 통해 진행 상황을 조율한다.

> 현재 Agent Teams는 **실험적 기능(Experimental)**으로, 별도 설정을 통해 활성화해야 한다.

## Subagent와 Agent Teams의 결정적 차이

```
Subagent 구조:
┌─ 메인 ─────────────────┐
│                        │
│  Subagent A ──▶ 메인   │   A는 메인에게만 보고
│  Subagent B ──▶ 메인   │   B는 메인에게만 보고
│  Subagent C ──▶ 메인   │   A, B, C끼리 소통 불가
│                        │
└────────────────────────┘

Agent Teams 구조:
┌─ 리더 ─────────────────────────────────────┐
│                                            │
│  ┌─ Agent A ─┐  ┌─ Agent B ─┐  ┌─ Agent C ─┐
│  │ 시장조사   │  │ 보고서    │  │ 발표자료   │
│  └─────┬─────┘  └─────┬─────┘  └─────┬─────┘
│        │              │              │
│        └──────── 메시지 ─────────────┘
│                    +
│            공유 태스크 리스트
└────────────────────────────────────────────┘
```

## 상세 비교표

| | **Subagent** | **Agent Teams** |
|---|---|---|
| **비유** | 부하 직원 (1:1 보고) | 프로젝트 팀 (수평 소통) |
| **통신 방식** | 메인에게만 결과 반환 | 팀원끼리 메시지 + 공유 태스크 리스트 |
| **조율 방식** | 메인이 전부 관리/조율 | 태스크 리스트로 자율 조율 |
| **컨텍스트** | 독립 (결과만 반환) | 각자 완전 독립 세션 |
| **병렬성** | 제한적 (메인이 순차 관리) | 높음 (동시 실행) |
| **토큰 비용** | 낮음 (하나씩 실행) | 높음 (N개 세션 동시) |
| **활성화** | 기본 사용 가능 | 설정 필요 (실험적) |
| **적합한 작업** | 단일 작업 위임 | 복수 작업 동시 협업 |

## 노코드 도구에서의 비유

| 노코드 도구 개념 | Claude Code |
|---|---|
| Make의 단일 시나리오에서 HTTP 모듈 호출 | Subagent |
| Make의 여러 시나리오가 Webhook으로 연결 | Agent Teams |
| Notion에서 한 사람이 여러 페이지 작업 | Subagent |
| Notion에서 여러 사람이 각자 페이지를 동시에 작성 | Agent Teams |
| 슬랙에서 매니저가 1:1로 업무 지시 | Subagent |
| 슬랙 채널에서 팀원들이 직접 소통하며 협업 | Agent Teams |

## Agent Teams 활성화 방법

`~/.claude/settings.json` 파일에 다음을 추가:

```json
{
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  }
}
```

설정 후 Claude Code를 재시작하면 사용 가능하다.

## Agent Teams의 동작 방식

### 1. 리더-멤버 구조

```
사용자: "프론트엔드, 백엔드, 테스트를 동시에 작업해줘"
  │
  ▼
리더 Claude (메인 세션)
  │
  ├─▶ Agent A: 프론트엔드 개발 (독립 세션)
  ├─▶ Agent B: 백엔드 API 개발 (독립 세션)
  └─▶ Agent C: 테스트 코드 작성 (독립 세션)
```

### 2. 공유 태스크 리스트

팀원들은 **공유 태스크 리스트**를 통해 서로의 진행 상황을 파악한다:

```
[공유 태스크 리스트]
├── ✅ Agent A: 컴포넌트 구조 설계 완료
├── 🔄 Agent B: API 엔드포인트 구현 중
├── ⏳ Agent C: A, B 완료 대기 중 (의존성)
└── 📋 미할당: 통합 테스트 작성
```

### 3. 팀원 간 직접 메시지

Subagent와 달리, Agent Teams의 팀원들은 **서로에게 직접 메시지**를 보낼 수 있다:

```
Agent A (프론트): "API 응답 형식이 { data: [] }인가요?"
Agent B (백엔드): "네, 그리고 에러 시 { error: message } 형식입니다"
Agent C (테스트): "두 형식 모두 테스트 케이스에 반영하겠습니다"
```

## 사용 시나리오 구분

### Subagent가 적합한 경우

- **단일 작업 위임**: "이 PDF 요약해줘", "코드베이스 구조 탐색해줘"
- **순차적 파이프라인**: A 완료 → B 시작 → C 시작
- **비용 효율 중시**: 토큰 사용량을 최소화해야 할 때
- **간단한 분석/보고**: 결과만 필요하고 과정은 중요하지 않을 때

### Agent Teams가 적합한 경우

- **병렬 개발**: "프론트/백엔드/테스트를 동시에 개발"
- **다중 관점 리뷰**: "3명의 전문가가 동시에 PR 리뷰"
- **상호 의존 작업**: 팀원 A의 결과가 팀원 B에게 필요하고, B의 결과가 C에게 필요한 경우
- **대규모 리팩토링**: 여러 모듈을 동시에 수정해야 할 때

## 실전 예시

### 예시 1: PR 리뷰 (Agent Teams)

```
리더: "이 PR을 3가지 관점에서 리뷰해줘"
  │
  ├─▶ 보안 전문가: SQL 인젝션, XSS 등 검토
  ├─▶ 성능 전문가: N+1 쿼리, 메모리 누수 등 검토
  └─▶ 아키텍처 전문가: 패턴 일관성, 결합도 등 검토
  │
  ▼
리더: 3개 리뷰를 종합하여 최종 피드백 작성
```

### 예시 2: 풀스택 기능 개발 (Agent Teams)

```
리더: "사용자 프로필 편집 기능을 추가해줘"
  │
  ├─▶ Agent A: React 컴포넌트 + 폼 UI 개발
  ├─▶ Agent B: Express API 엔드포인트 개발
  └─▶ Agent C: Jest + Cypress 테스트 작성
  │
  ▼
[A가 B에게]: "프로필 이미지 업로드 API도 필요합니다"
[B가 C에게]: "업로드 API 엔드포인트 /api/profile/image로 만들었습니다"
[C]: "업로드 API 테스트도 추가하겠습니다"
```

## 비용과 트레이드오프

| 항목 | Subagent | Agent Teams |
|---|---|---|
| **토큰 사용량** | 적음 (한 번에 하나) | 많음 (N개 동시) |
| **소요 시간** | 순차적이라 느릴 수 있음 | 병렬이라 빠름 |
| **복잡성** | 단순 | 조율 오버헤드 있음 |
| **결과 품질** | 단일 관점 | 다중 관점 종합 |

> **일반 규칙**: 작업이 독립적이고 단순하면 Subagent, 작업이 상호의존적이고 복잡하면 Agent Teams.

## 핵심 정리

- Agent Teams = **여러 Claude 인스턴스가 독립 세션에서 동시 작업 + 직접 소통**
- Subagent와의 핵심 차이: 팀원 간 **직접 메시지** + **공유 태스크 리스트**
- 현재 실험적 기능 → `settings.json`에서 활성화 필요
- 비용(토큰)은 높지만 병렬 처리로 속도와 품질을 높일 수 있음
- 실무에서는 대부분 Subagent로 충분하고, 대규모 복잡 작업에서 Agent Teams 고려
