# 스킬 vs 규칙 — 언제 뭘 쓸지 판단하는 법

## 왜 이 구분이 중요한가

Claude Code에서 "Claude에게 지시하는 방법"은 크게 4가지:

```
┌─────────────────────────────────────────────────────────┐
│                    지시 방법 4가지                        │
├──────────────┬──────────────────────────────────────────┤
│  항상 적용    │  CLAUDE.md (규칙)          ← 매 세션 로드 │
│              │  Memory (기억)            ← 자동 참조    │
├──────────────┼──────────────────────────────────────────┤
│  호출 시 적용  │  Skill (.claude/skills/)  ← 자연어 매칭  │
│              │  Command (~/.claude/commands/) ← /명령어  │
└──────────────┴──────────────────────────────────────────┘
```

잘못 구분하면:
- 규칙으로 넣어야 할 걸 스킬로 만들면 → 매번 호출해야 해서 까먹음
- 스킬로 만들어야 할 걸 규칙으로 넣으면 → CLAUDE.md가 비대해지고 토큰 낭비

---

## 핵심 판단 기준

### 한 문장 원칙

> **"항상 지켜야 하는 행동 원칙인가?"** → CLAUDE.md 규칙
> **"매번 같은 절차를 밟아야 하는가?"** → Skill / Command

### 판단 플로우

```
이 지시가 필요한 상황이 왔다
       │
       ▼
매번 자동으로 적용돼야 하나?
       │
  ┌────┴────┐
  YES       NO
  │         │
  ▼         ▼
규칙       절차가 정형화되어 있나?
(CLAUDE.md)    │
          ┌───┴───┐
          YES     NO
          │       │
          ▼       ▼
        Skill/   그냥 대화로
        Command  해결하면 됨
```

### 구체적 기준표

| 기준 | → 규칙 (CLAUDE.md) | → 스킬/커맨드 |
|------|-------------------|--------------|
| **빈도** | 매 세션, 매 응답 | 특정 시점에만 (배포 전, 세션 종료 시) |
| **판단 필요** | 없음 (무조건 따르기) | 있음 (사용자가 호출 결정) |
| **절차 복잡도** | 한 줄~몇 줄 | 여러 단계, 에이전트 조합 |
| **맥락 의존** | 없음 (항상 동일) | 있음 (상황마다 입력이 다름) |
| **산출물** | 없음 (행동 방식 변경) | 있음 (리포트, 문서, 체크리스트) |

---

## 실전 사례: 이번 세션에서의 판단

### Case 1: "프론트 코드를 먼저 읽어라" → 규칙

처음에는 `/frontend-prompt` 스킬로 만들까 고민했지만, 결국 **CLAUDE.md 규칙**으로 결정.

```
IMPORTANT: 프론트엔드 관련 논의 시, 반드시 vista-sphere-pro의
git log, 컴포넌트 구조를 먼저 읽고 파악한 후 답변한다. 추측하지 않는다.
```

**왜 규칙인가?**
- "프론트 수정해줘"라고 할 때 매번 `/frontend-prompt`를 호출하는 건 번거로움
- 프론트 관련 대화가 나오면 **항상** 코드를 먼저 읽어야 함
- 호출 여부를 사용자가 결정할 필요 없음 (무조건 적용)
- 정형화된 절차가 아니라 행동 원칙

### Case 2: "세션 끝날 때 정리" → 스킬 (/wrap)

```
4개 에이전트 병렬 → 중복 제거 → 사용자 선택 → 실행
```

**왜 스킬인가?**
- 매 세션이 아니라 **세션 종료 시에만** 필요
- 4개 에이전트 병렬 실행이라는 **정형화된 절차**가 있음
- 결과를 보고 사용자가 **어떤 업데이트를 할지 선택**해야 함
- 명확한 산출물이 있음 (작업 요약, 다음 할 일, 업데이트 제안)

### Case 3: "코드, 커밋은 영문으로" → 규칙

```
IMPORTANT: 코드, 커밋 메시지, CLI 출력 등 기술 산출물은 반드시 영문 유지
```

**왜 규칙인가?**
- 모든 코드 작성, 모든 커밋에 **예외 없이** 적용
- 판단이 필요 없음 (무조건 영문)
- 절차가 아니라 원칙

### Case 4: "배포 전 6가지 체크" → 스킬 (/preflight)

```
Git → 환경변수 → DB 마이그레이션 → CORS → Health → API 변경 → PASS/FAIL
```

**왜 스킬인가?**
- 배포할 때만 필요 (매일이 아님)
- 6개 항목을 순서대로 체크하는 **정형화된 절차**
- 결과에 따라 push 여부를 **사용자가 결정**
- PASS/FAIL 체크리스트라는 산출물

---

## Command vs Skill — 어디에 둘 것인가

스킬/커맨드로 만들기로 결정한 후, 다음 판단:

```
이 스킬이 모든 프로젝트에서 쓸모 있나?
       │
  ┌────┴────┐
  YES       NO
  │         │
  ▼         ▼
Command    Skill
(~/.claude/  (프로젝트/.claude/
 commands/)   skills/)
```

| 배치 | 위치 | 호출 | 예시 |
|------|------|------|------|
| **Global Command** | `~/.claude/commands/wrap.md` | `/wrap` (어디서든) | `/wrap`, `/switch`, `/weekly` |
| **Project Skill** | `프로젝트/.claude/skills/preflight/SKILL.md` | `/preflight` (해당 프로젝트에서만) | `/preflight` |

### 추가 차이점

| | Command | Skill |
|---|---------|-------|
| **frontmatter** | 불필요 | `name`, `description` 필수 |
| **자연어 트리거** | 불가 (`/명령어`만) | 가능 (description 기반 매칭) |
| **인자 전달** | `$ARGUMENTS` 변수 | 불가 |
| **파일 구조** | 단일 `.md` 파일 | 폴더 + `SKILL.md` (+ references/) |

---

## CLAUDE.md 레벨 — 어느 CLAUDE.md에 넣을 것인가

규칙으로 결정했으면, 어떤 레벨의 CLAUDE.md에 넣을지:

```
~/.claude/CLAUDE.md              ← 모든 프로젝트에 적용 (페르소나, 언어, 톤)
프로젝트/CLAUDE.md               ← 이 프로젝트에만 적용 (인프라, 컨벤션)
```

| 규칙 내용 | 레벨 | 이유 |
|-----------|------|------|
| "한국어로 답해" | Global | 모든 프로젝트 동일 |
| "main push = 프로덕션 배포" | Project | WICHI에만 해당 |
| ".env 내용 출력 금지" | Global | 모든 프로젝트 공통 보안 |
| "프론트 코드 먼저 읽어라" | Project | WICHI 프론트만 해당 |
| "DB 변경 전 SQL 보여줘" | Global | 모든 프로젝트 공통 안전 |

---

## 실전 판단 연습

아래 상황에서 규칙 vs 스킬, 어디에 둘지 판단해보자:

| 상황 | 판단 | 이유 |
|------|------|------|
| "PR 올릴 때마다 변경 요약 만들어줘" | Command `/pr-summary` | 정형 절차 + 모든 프로젝트 공통 |
| "이 프로젝트는 pnpm만 써" | Project CLAUDE.md | 항상 적용 + 프로젝트 특화 |
| "에러나면 로그 먼저 확인해" | Global CLAUDE.md | 항상 적용 + 모든 프로젝트 공통 |
| "주간 비용 리포트 생성" | Project Skill | 정형 절차 + 프로젝트 특화 |
| "테스트 없이 커밋하지 마" | Project CLAUDE.md | 항상 적용 + 프로젝트별 테스트 방식 다름 |

---

## 정리

```
지시가 필요하다
    │
    ├─ 항상 적용? ──→ 규칙 (CLAUDE.md)
    │                  ├─ 모든 프로젝트? → Global CLAUDE.md
    │                  └─ 이것만?      → Project CLAUDE.md
    │
    └─ 특정 시점?  ──→ 스킬/커맨드
                       ├─ 모든 프로젝트? → Command (~/.claude/commands/)
                       └─ 이것만?      → Skill (.claude/skills/)
```
