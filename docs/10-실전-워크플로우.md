# 실전 워크플로우 — Claude Code 활용 패턴 모음

## 이 문서의 목적

앞선 문서에서 Claude Code의 개별 개념(체계, 기억, Skill, Subagent, MCP, Hooks 등)을 학습했다. 이 문서에서는 **실제 업무에서 이 개념들을 어떻게 조합하여 사용하는지** 패턴별로 정리한다.

## Pattern 1: CLAUDE.md 작성 전략

### 전역 CLAUDE.md — 개인 워크스타일 설정

```markdown
# ~/.claude/CLAUDE.md

## Language
- 기본 응답 언어: 한국어
- 코드, 커밋 메시지, CLI 출력: 영문 유지

## Tone
- 간결하고 논리적인 톤
- 불필요한 인사말 생략

## Preferences
- 구조화된 답변 시 테이블 우선 사용
- 코드 변경 시 변경 이유를 간단히 설명
```

**포인트**: 이 파일은 모든 프로젝트에 적용되므로, **언어/톤/형식** 같은 개인 선호만 넣는다. 프로젝트별 규칙은 넣지 않는다.

### 프로젝트 CLAUDE.md — 팀 컨벤션

```markdown
# ./CLAUDE.md

## Project
- Next.js 14 + TypeScript + Tailwind CSS
- 패키지 매니저: pnpm

## Conventions
- 컴포넌트: PascalCase (UserProfile.tsx)
- API 라우트: kebab-case (user-profile/)
- 커밋 메시지: Conventional Commits (feat:, fix:, docs:)

## Rules
- 새 기능 추가 시 반드시 테스트 코드 포함
- console.log 커밋 금지
- any 타입 사용 금지
```

**포인트**: 팀원 모두가 공유하는 규칙. git에 포함시켜 팀 컨벤션으로 활용.

### CLAUDE.md 작성 실수 모음

| 실수 | 왜 문제인가 | 대안 |
|---|---|---|
| 전체 프로젝트 문서를 복사해 넣음 | 매 세션 수천 토큰 소비 | 핵심 규칙만, 상세 내용은 Skill로 |
| "가능하면 ~해주세요" 같은 모호한 표현 | Claude가 무시할 수 있음 | "반드시 ~할 것" 명령형 사용 |
| 상충되는 규칙이 여러 곳에 존재 | 예측 불가한 동작 | 한 곳에서만 정의, 우선순위 명시 |
| 너무 많은 규칙 (50개 이상) | 전부 따르기 어려움 | 핵심 10개 이내로 제한 |

## Pattern 2: 일일 업무 자동화

### 아침 루틴 Skill

```markdown
# .claude/skills/morning-check/SKILL.md

## 역할
프로젝트 상태를 점검하는 어시스턴트

## 할 일
1. git log로 어제 이후 커밋 확인
2. git status로 미완성 작업 확인
3. TODO/FIXME 코멘트 검색
4. 다음 포맷으로 정리:

### 어제 커밋
- [목록]

### 진행 중 (미커밋 변경)
- [목록]

### 남은 TODO
- [파일:라인] 내용
```

**사용**: 매일 아침 `/morning-check` 실행 → 프로젝트 현황 파악

### 노코드 도구 비교

| 기존 방식 | Claude Code 방식 |
|---|---|
| Notion에 수동으로 일일 기록 작성 | `/morning-check`로 자동 생성 |
| Jira 대시보드에서 이슈 확인 | git 기반으로 실제 코드 변경 추적 |
| Slack 스탠드업 봇에 직접 입력 | 자동 분석 후 정리본 제공 |

## Pattern 3: 학습 및 문서화 워크플로우

### 새로운 코드베이스 분석

```
Step 1: 전체 구조 파악 (Explore Subagent 활용)
  "이 프로젝트의 디렉토리 구조와 주요 기술 스택을 분석해줘"

Step 2: 핵심 흐름 추적
  "사용자가 로그인할 때 코드가 어떤 순서로 실행되는지 추적해줘"

Step 3: 문서화
  "분석 결과를 docs/architecture.md로 정리해줘"
```

**포인트**: Step 1에서 Explore Subagent가 자동으로 활용된다. 전체 파일을 메인 컨텍스트에 올리지 않고 독립 공간에서 탐색 → 요약만 전달.

### 학습 노트 작성 패턴

```
Step 1: 개념 질문
  "Next.js의 App Router와 Pages Router의 차이를 설명해줘"

Step 2: 실습 코드 생성
  "간단한 예제 코드로 차이를 보여줘"

Step 3: 정리 및 저장
  "지금까지 내용을 docs/nextjs-routing.md로 정리해줘"
```

## Pattern 4: 코드 리뷰 자동화

### Skill + Subagent 조합

```markdown
# .claude/skills/review/SKILL.md

## 역할
시니어 개발자 관점의 코드 리뷰어

## 할 일
1. 최근 커밋의 변경 사항을 분석
2. 다음 관점에서 리뷰:
   - 보안: SQL 인젝션, XSS 등
   - 성능: 불필요한 연산, N+1 쿼리
   - 가독성: 네이밍, 함수 길이
   - 테스트: 누락된 테스트 케이스
3. 심각도별로 분류하여 테이블로 출력

## 출력 형식
| 파일 | 라인 | 심각도 | 카테고리 | 내용 |
```

**고급 활용**: Agent Teams가 활성화되어 있다면 보안/성능/가독성 전문가를 각각 별도 Agent로 띄워 병렬 리뷰 가능.

## Pattern 5: 반복 보고서 생성

### MCP + Skill 조합

```markdown
# .claude/skills/weekly-report/SKILL.md

## 할 일
1. GitHub MCP로 이번 주 머지된 PR 목록 조회
2. 각 PR의 변경 요약 작성
3. 이번 주 생성/해결된 이슈 통계 정리
4. docs/reports/ 폴더에 주간 보고서 저장
5. (MCP 설정 시) Slack #team-updates 채널에 요약 전송

## 보고서 형식
# 주간 개발 보고 (YYYY-MM-DD)

## 완료 항목
| PR | 작성자 | 요약 |

## 이슈 현황
- 신규: N건
- 해결: N건
- 미해결: N건

## 다음 주 예정
- [예정 항목]
```

## Pattern 6: 안전한 자동화 구축

### Hooks + 커스텀 Subagent 조합

```
자동화 계층:

1. Hooks (자동 실행)
   └─ 파일 저장 시 → Prettier + ESLint 자동 실행
   └─ 위험한 명령 → 자동 차단

2. 커스텀 Subagent (제한된 권한)
   └─ DB 조회 전용 (Read, Grep만 허용, Write/Bash 금지)
   └─ 로그 분석 전용 (특정 디렉토리만 접근 가능)

3. Skill (수동 호출)
   └─ 배포 체크리스트 (사람이 확인 후 실행)
```

**포인트**: 자동화 수준에 따라 도구를 계층적으로 사용. 완전 자동(Hooks) → 제한 자동(Subagent) → 수동(Skill).

## Pattern 7: PC 없이 Claude Code 활용하기

Claude Code는 터미널에서 실행되므로 PC가 없으면 못 쓴다고 생각하기 쉽다. 하지만 몇 가지 방법으로 모바일에서도 접근 가능하다.

### Chat Interface vs CLI — 먼저 알아야 할 것

claude.ai 앱(Chat Interface)과 Claude Code(CLI)는 **완전히 별개 제품**이다. 대화 히스토리, 설정, 파일 모두 공유되지 않는다 (→ [01-claude-code-체계.md](01-claude-code-체계.md) 참조). 따라서 모바일에서 "Claude Code와 같은 경험"을 원한다면, claude.ai 앱을 여는 것이 아니라 **CLI 자체에 원격 접속**해야 한다.

### 방법별 비교

| 방법 | 필요 조건 | CLI 기능 사용 | 추천 상황 |
|------|----------|:------------:|----------|
| **Claude 모바일 앱** | 없음 | X (대화만) | 간단한 질문, 브레인스토밍 |
| **SSH + 모바일 터미널** | PC 전원 ON + SSH 설정 | O (완전) | 코드 작업 이어가기 |
| **GitHub Codespaces** | GitHub 계정 | O (완전) | PC 장기 미사용 시 |

### SSH 원격 접근 세팅 (추천)

가장 실용적인 조합: **Tailscale(무료 VPN mesh) + 모바일 터미널 앱**

```
[모바일]                         [PC (집/사무실)]
Termius / Blink Shell  ───→  SSH 서버 (원격 로그인 활성화)
        │                              │
        └──── Tailscale VPN ───────────┘
               (포트포워딩 불필요, 어디서든 안전 연결)
```

설정 순서:
1. PC: 시스템 설정 → 일반 → 공유 → **원격 로그인** 활성화
2. PC + 모바일 양쪽에 **Tailscale** 설치, 같은 계정으로 로그인
3. 모바일 터미널 앱(Termius 등)에서 Tailscale이 부여한 IP로 SSH 접속
4. 터미널에서 `claude` 실행 → PC에 있을 때와 동일한 환경에서 작업

**Tailscale을 쓰는 이유**: 일반 SSH는 공유기 포트포워딩, 고정 IP 등 네트워크 설정이 복잡하다. Tailscale은 설치만 하면 기기 간 가상 사설망을 자동 구성해주므로, 카페·지하철 등 어디서든 집 PC에 바로 접속 가능하다.

### 모바일 터미널 앱 선택지

| 앱 | 플랫폼 | 특징 |
|----|--------|------|
| **Termius** | iOS / Android | 깔끔한 UI, 무료 플랜 충분 |
| **Blink Shell** | iOS | 전문가용, mosh 지원 |
| **JuiceSSH** | Android | 가볍고 빠름 |

### Chat과 CLI 양쪽에서 같은 맥락 유지하기

두 제품 간 히스토리가 공유되지 않으므로, 맥락을 유지하려면 수동 전략이 필요하다:

| 전략 | 방법 |
|------|------|
| **공유 지식 기반** | Notion 등에 핵심 컨텍스트 정리. CLI는 MCP로 Notion 연동, Chat은 수동 참조 |
| **세션 인수인계** | CLI 작업 후 요약을 파일에 저장 → Chat에서 해당 요약을 붙여넣고 이어서 대화 |
| **SSH 직접 접근** | 모바일에서 CLI 자체를 사용 → 히스토리 문제 자체가 없음 (가장 깔끔) |

## 워크플로우 설계 가이드

### 어떤 도구를 언제 쓸 것인가

```
"이 작업을 자동화하고 싶다"
  │
  ├─ 매번 동일한 단순 처리? ──▶ Hooks
  │   (포맷팅, 린트, 차단)
  │
  ├─ 반복되지만 판단이 필요? ──▶ Skill
  │   (보고서 생성, 코드 리뷰)
  │
  ├─ 외부 서비스 연동 필요? ──▶ MCP + Skill
  │   (Slack 전송, DB 조회)
  │
  ├─ 대량 데이터 처리? ──▶ Subagent
  │   (100개 파일 분석, 대형 로그 파싱)
  │
  └─ 여러 전문가 관점 필요? ──▶ Agent Teams
      (병렬 리뷰, 동시 개발)
```

### 노코드 도구 → Claude Code 전환 매핑

| 기존 노코드 워크플로우 | Claude Code로 전환 |
|---|---|
| Zapier: Gmail 수신 → Notion에 정리 | MCP(Gmail) + Skill(정리 로직) |
| Make: 매주 월요일 → 보고서 생성 → Slack 전송 | Skill(보고서) + MCP(Slack) |
| GitHub Actions: PR → 자동 리뷰 | Hooks(PR 이벤트) + Skill(리뷰 로직) |
| Notion 자동화: 상태 변경 → 알림 | Hooks + MCP(Notion) |

## 핵심 정리

- **CLAUDE.md**: 전역(개인 선호) / 프로젝트(팀 규칙) / 로컬(개인 설정)로 계층 분리
- **일상 자동화**: Skill로 반복 작업을 레시피화
- **안전한 자동화**: Hooks(자동) → Subagent(제한 자동) → Skill(수동) 계층 설계
- **외부 연동**: MCP + Skill 조합으로 노코드 도구 수준의 워크플로우 구현
- **모바일 활용**: PC 없이도 SSH(Tailscale + 터미널 앱)로 CLI에 원격 접속 가능. Chat과 CLI는 별개이므로 맥락 유지 전략이 필요
- 도구 선택 기준: 단순 반복(Hooks) / 판단 필요(Skill) / 외부 연동(MCP) / 대량 처리(Subagent) / 다관점(Teams)
